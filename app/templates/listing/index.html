{% extends "/components/base.html" %} {% block title %}Fashion Listings -
ReWear{% endblock %} {% block style %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/listing.css') }}" />
{% endblock %} {% block content %}
<div class="container main-content">
  <!-- Header Section -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="section-header">
        <h1 class="page-title">
          <i class="fas fa-tshirt me-2"></i>
          Discover Fashion Treasures
        </h1>
        <p class="page-subtitle">
          Find unique clothing items and give them a new life through
          sustainable swapping
        </p>
      </div>
    </div>
  </div>

  <!-- Carousel Image Div -->
  <div id="listingCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img
          src="https://picsum.photos/1200/400?random=1"
          class="d-block w-100"
          alt="Fashion Collection 1"
          style="object-fit: cover; height: 400px; border-radius: 16px" />
        <div class="carousel-caption d-none d-md-block">
          <h3 class="fw-bold">Sustainable Fashion Awaits</h3>
          <p>Discover pre-loved clothing that tells a story</p>
        </div>
      </div>
      <div class="carousel-item">
        <img
          src="https://picsum.photos/1200/400?random=2"
          class="d-block w-100"
          alt="Fashion Collection 2"
          style="object-fit: cover; height: 400px; border-radius: 16px" />
        <div class="carousel-caption d-none d-md-block">
          <h3 class="fw-bold">Every Item Has a Story</h3>
          <p>Connect with fashion enthusiasts in your community</p>
        </div>
      </div>
      <div class="carousel-item">
        <img
          src="https://picsum.photos/1200/400?random=3"
          class="d-block w-100"
          alt="Fashion Collection 3"
          style="object-fit: cover; height: 400px; border-radius: 16px" />
        <div class="carousel-caption d-none d-md-block">
          <h3 class="fw-bold">Swap, Style, Repeat</h3>
          <p>Build your perfect wardrobe sustainably</p>
        </div>
      </div>
    </div>
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#listingCarousel"
      data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#listingCarousel"
      data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <!-- Stats Section -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="stats-container">
        <div class="stat-item">
          <i class="fas fa-tshirt stat-icon"></i>
          <div class="stat-content">
            <span class="stat-number">{{ listings|length }}</span>
            <span class="stat-label">Available Items</span>
          </div>
        </div>
        <div class="stat-item">
          <i class="fas fa-users stat-icon"></i>
          <div class="stat-content">
            <span class="stat-number"
              >{{ listings|map(attribute='category')|unique|list|length }}</span
            >
            <span class="stat-label">Categories</span>
          </div>
        </div>
        <div class="stat-item">
          <i class="fas fa-exchange-alt stat-icon"></i>
          <div class="stat-content">
            <span class="stat-number"
              >{{ listings|selectattr('status', 'equalto',
              'Available')|list|length }}</span
            >
            <span class="stat-label">Ready to Swap</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Category Section -->
  <div class="row mb-5">
    <div class="col-12">
      <h2 class="section-title mb-4">
        <i class="fas fa-tags me-2"></i>
        Shop by Category
      </h2>
      <div class="category-grid">
        <div class="category-card">
          <img
            src="https://picsum.photos/150/100?random=4"
            class="category-img"
            alt="Men's Fashion" />
          <div class="category-overlay">
            <h6 class="category-title">Men's Fashion</h6>
            <p class="category-count">
              {{ listings|selectattr('category', 'equalto', 'Men')|list|length
              }} items
            </p>
          </div>
        </div>
        <div class="category-card">
          <img
            src="https://picsum.photos/150/100?random=5"
            class="category-img"
            alt="Women's Fashion" />
          <div class="category-overlay">
            <h6 class="category-title">Women's Fashion</h6>
            <p class="category-count">
              {{ listings|selectattr('category', 'equalto', 'Women')|list|length
              }} items
            </p>
          </div>
        </div>
        <div class="category-card">
          <img
            src="https://picsum.photos/150/100?random=6"
            class="category-img"
            alt="Kids Fashion" />
          <div class="category-overlay">
            <h6 class="category-title">Kids Fashion</h6>
            <p class="category-count">
              {{ listings|selectattr('category', 'equalto', 'Kids')|list|length
              }} items
            </p>
          </div>
        </div>
        <div class="category-card">
          <img
            src="https://picsum.photos/150/100?random=7"
            class="category-img"
            alt="Accessories" />
          <div class="category-overlay">
            <h6 class="category-title">Accessories</h6>
            <p class="category-count">
              {{ listings|selectattr('type', 'equalto', 'Others')|list|length }}
              items
            </p>
          </div>
        </div>
        <div class="category-card">
          <img
            src="https://picsum.photos/150/100?random=8"
            class="category-img"
            alt="Formal Wear" />
          <div class="category-overlay">
            <h6 class="category-title">Formal Wear</h6>
            <p class="category-count">
              {{ listings|selectattr('type', 'equalto', 'Dress')|list|length }}
              items
            </p>
          </div>
        </div>
        <div class="category-card">
          <img
            src="https://picsum.photos/150/100?random=9"
            class="category-img"
            alt="Casual Wear" />
          <div class="category-overlay">
            <h6 class="category-title">Casual Wear</h6>
            <p class="category-count">
              {{ listings|selectattr('type', 'equalto', 'Shirt')|list|length }}
              items
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Fashion Listings Grid -->
  <div class="row mb-4">
    <div class="col-12">
      <h2 class="section-title mb-4">
        <i class="fas fa-sparkles me-2"></i>
        Latest Arrivals
      </h2>
    </div>
  </div>

  <div class="fashion-grid">
    {% for listing in listings %}
    <article
      class="fashion-card"
      role="article"
      aria-labelledby="listing-{{ listing.id }}-title">
      <!-- Fashion Image Container -->
      <div class="fashion-card-img-container">
        <a
          href="{{ url_for('listing.showListing', listing_id=listing.id) }}"
          class="fashion-link"
          aria-label="View details for {{ listing.title }}">
          <img
            src="{{ listing.image_url }}"
            class="fashion-card-img"
            alt="{{ listing.title }}" />
        </a>

        <!-- Fashion Badges -->
        <div class="fashion-badges">
          {% if listing.category == 'Men' %}
          <span class="badge badge-men">
            <i class="fas fa-male me-1"></i>Men
          </span>
          {% elif listing.category == 'Women' %}
          <span class="badge badge-women">
            <i class="fas fa-female me-1"></i>Women
          </span>
          {% elif listing.category == 'Kids' %}
          <span class="badge badge-kids">
            <i class="fas fa-child me-1"></i>Kids
          </span>
          {% endif %} {% if listing.type %}
          <span class="badge badge-type">
            {% if listing.type == 'Shirt' %}
            <i class="fas fa-tshirt me-1"></i>{{ listing.type }} {% elif
            listing.type == 'Pants' %} <i class="fas fa-user-tie me-1"></i>{{
            listing.type }} {% elif listing.type == 'Dress' %}
            <i class="fas fa-female me-1"></i>{{ listing.type }} {% else %}
            <i class="fas fa-tags me-1"></i>{{ listing.type }} {% endif %}
          </span>
          {% endif %}
        </div>
      </div>

      <!-- Card Body -->
      <div class="fashion-card-body">
        <a
          href="{{ url_for('listing.showListing', listing_id=listing.id) }}"
          class="fashion-link text-decoration-none">
          <h2 class="fashion-card-title" id="listing-{{ listing.id }}-title">
            {{ listing.title }}
          </h2>

          <!-- Fashion Info -->
          <div class="fashion-info">
            <div class="info-item">
              <i class="fas fa-ruler-combined me-1"></i>
              <span>Size: {{ listing.size }}</span>
            </div>
            <div class="info-item">
              <i class="fas fa-calendar-alt me-1"></i>
              <span
                >Listed: {{ listing.created_at.strftime('%b %d, %Y') }}</span
              >
            </div>
          </div>
        </a>

        <!-- Card Footer -->
        <div class="card-footer">
          <div class="points-section">
            <div class="points-label">Swap Points</div>
            <div class="points-value">{{ listing.point_value }}</div>
          </div>

          <div class="action-buttons">
            {% if listing.status == 'Available' and listing.is_available %}
            <a
              href="{{ url_for('listing.showListing', listing_id=listing.id) }}"
              class="swap-btn"
              aria-label="Swap {{ listing.title }}">
              <i class="fas fa-exchange-alt me-1"></i>
              Swap Now
            </a>
            {% else %}
            <span class="swapped-badge">
              <i class="fas fa-check-circle me-1"></i>
              {{ listing.status }}
            </span>
            {% endif %}
          </div>
        </div>
      </div>
    </article>
    {% endfor %}
  </div>

  <!-- Add New Listing Button -->
  <div class="text-center mt-5">
    {% if session.get('user_id') %}
    <a
      href="{{ url_for('listing.renderNewPage') }}"
      class="btn btn-outline-primary-fashion btn-lg">
      <i class="fas fa-plus me-2"></i>List Your Fashion Item
    </a>
    {% else %}
    <a
      href="{{ url_for('auth.login') }}"
      class="btn btn-outline-primary-fashion btn-lg">
      <i class="fas fa-sign-in-alt me-2"></i>Login to List Items
    </a>
    {% endif %}
  </div>

  <!-- Empty State -->
  {% if not listings %}
  <div class="empty-state text-center py-5">
    <div class="mb-4">
      <i
        class="fas fa-tshirt text-muted"
        style="font-size: 4rem; opacity: 0.3"></i>
    </div>
    <h3 class="text-muted mb-3">No fashion items found</h3>
    <p class="text-muted mb-4">
      Be the first to list a fashion item and start swapping!
    </p>
    {% if session.get('user_id') %}
    <a
      href="{{ url_for('listing.renderNewPage') }}"
      class="btn btn-outline-primary-fashion">
      <i class="fas fa-plus me-2"></i>List Your First Item
    </a>
    {% else %}
    <a
      href="{{ url_for('auth.login') }}"
      class="btn btn-outline-primary-fashion">
      <i class="fas fa-sign-in-alt me-2"></i>Login to List Items
    </a>
    {% endif %}
  </div>
  {% endif %}
</div>

<script>
  // Auto-hide flash messages after 5 seconds
  document.addEventListener("DOMContentLoaded", function () {
    const alerts = document.querySelectorAll(".alert");
    alerts.forEach(function (alert) {
      setTimeout(function () {
        if (alert.classList.contains("show")) {
          alert.classList.remove("show");
          setTimeout(function () {
            alert.remove();
          }, 150);
        }
      }, 5000);
    });
  });

  // Add smooth hover animations
  document.addEventListener("DOMContentLoaded", function () {
    const fashionCards = document.querySelectorAll(".fashion-card");

    fashionCards.forEach((card) => {
      card.addEventListener("mouseenter", function () {
        this.style.transform = "translateY(-8px)";
      });

      card.addEventListener("mouseleave", function () {
        this.style.transform = "translateY(0)";
      });
    });
  });
</script>
{% endblock %}
